(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{177:function(e,t,a){e.exports=a(340)},334:function(e,t,a){},339:function(e,t,a){},340:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(6),c=a.n(o),l=a(357),s=a(355),i=a(13),u=a.n(i),m=a(23),p=a(19),d=a(27),f=a(22),h=a(20),b=a(65),y=a(21),g=a(342),v=a(352),j=a(130),E=a(9),x=a(343),k=g.a.Sider,S=j.b.SubMenu,O=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={collapsed:!1},a.onCollapse=function(e){console.log(e),a.setState({collapsed:e})},a.render=function(){return r.a.createElement(k,{collapsible:!0,collapsed:a.state.collapsed,onCollapse:a.onCollapse},r.a.createElement("div",{className:"logo",style:{color:"white",width:"100%",textAlign:"center",fontSize:"20px",margin:"15px 0"}},"Sylph"),r.a.createElement(j.b,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline"},r.a.createElement(j.b.Item,{key:"1"},r.a.createElement(x.a,{to:"/joblist"},r.a.createElement(E.a,{type:"tool"}),"JobManager")),r.a.createElement(S,{key:"2",title:r.a.createElement("span",null,r.a.createElement(E.a,{type:"tool"}),r.a.createElement("span",null,"Connector"))},r.a.createElement(j.b.Item,{key:"2"},r.a.createElement(x.a,{to:"/connectors"},r.a.createElement(E.a,{type:"tool"}),"Connectors")),r.a.createElement(j.b.Item,{key:"3"},r.a.createElement(x.a,{to:"/connector_manager"},r.a.createElement(E.a,{type:"tool"}),"Manager"))),r.a.createElement(j.b.Item,{key:"5"},r.a.createElement(x.a,{to:"/serverLogs"},r.a.createElement(E.a,{type:"tool"}),"ServerLogs")),r.a.createElement(S,{key:"sub1",title:r.a.createElement("span",null,r.a.createElement(E.a,{type:"user"}),r.a.createElement("span",null,"User"))},r.a.createElement(j.b.Item,{key:"7"},r.a.createElement("span",{onClick:a.props.logout},r.a.createElement(E.a,{type:"tool"}),"Logout")))))},a}return Object(y.a)(t,e),t}(r.a.Component),w=a(351),I=a(353),C=a(68),N=a(31),_=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.afterLogin,a=this.props.form.getFieldDecorator;return r.a.createElement(w.a,{onSubmit:function(a){a.preventDefault(),e.props.form.validateFields(function(){var e=Object(m.a)(u.a.mark(function e(a,n){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a||console.log("Received values of form: ",n),e.next=3,fetch("/_sys/auth/login",{method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json"}});case 3:return r=e.sent,e.next=6,r.json();case 6:(r=e.sent).userName===n.userName&&(console.log("".concat(n.user," login ok")),t(r.userName));case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}())},style:{width:"25vw",margin:"10vh auto 0 auto"}},r.a.createElement(w.a.Item,null,a("userName",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(I.a,{prefix:r.a.createElement(E.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(w.a.Item,null,a("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(I.a,{prefix:r.a.createElement(E.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(w.a.Item,null,r.a.createElement("div",null,a("remember",{valuePropName:"checked",initialValue:!0})(r.a.createElement(C.a,null,"Remember me")),r.a.createElement("a",{className:"login-form-forgot",href:""},"Forgot password")),r.a.createElement(N.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"),"Or ",r.a.createElement("a",{href:""},"register now!")))}}]),t}(r.a.Component),T=w.a.create({name:"normal_login"})(_),D=a(78),q=a(44),L=a(356),A=a(344),M=a(345),G=a(346),J=a(350),P=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).deploys={},a.state={jobList:[],columns:[{title:"Job",dataIndex:"jobName",key:"jobName"},{title:"runId",dataIndex:"runId",key:"runId",width:200,render:function(e,t,n){if("DEPLOYING"===t.status){var o=function(e){return Object.assign([],a.state.jobList,e)};if(!a.deploys[t.jobId]){var c=setInterval(Object(m.a)(u.a.mark(function e(){var r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetchData("/job/".concat(t.jobId));case 2:"DEPLOYING"!==(r=e.sent).status?(clearInterval(a.deploys[t.jobId]),a.setState({jobList:o(Object(D.a)({},n,Object(q.a)({},r)))}),delete a.deploys[t.jobId]):a.setState({jobList:o(Object(D.a)({},n,Object(q.a)({},r)))});case 4:case"end":return e.stop()}},e)})),1e3);a.deploys[t.jobId]=c}return r.a.createElement(L.a,{color:"blue",key:e},r.a.createElement(E.a,{type:"loading"}),"\xa0\xa0processing...")}return e&&e.length>0?r.a.createElement(L.a,{color:"blue",key:e,onClick:function(){return window.open(t.appUrl)}},e):r.a.createElement(L.a,{color:"red"},"\u6682\u65e0")}},{title:"type",dataIndex:"type",key:"type"},{title:"status",dataIndex:"status",key:"status"},{title:"Action",key:"action",render:function(e,t,n){var o=r.a.createElement(A.a,{title:"Are you sure deploy this job?",onConfirm:function(){return a.handleDeployOrStop("deploy",t.jobId)},okText:"Yes",cancelText:"No",placement:"left"},r.a.createElement("a",{href:"/#"},"Deploy")),c=r.a.createElement(A.a,{title:"Are you sure stop this job?",onConfirm:function(){a.handleDeployOrStop("stop",t.jobId)},okText:"Yes",cancelText:"No",placement:"left"},r.a.createElement("a",{href:"/#"},"Stop"));return r.a.createElement("span",null,"STOP"===t.status?o:c,r.a.createElement(M.a,{type:"vertical"}),r.a.createElement(A.a,{title:"Are you sure Delete this job?",onConfirm:function(){a.handleDeployOrStop("delete",t.jobId)},okText:"Yes",cancelText:"No",placement:"left"},r.a.createElement("a",{href:"/#",style:{color:"red"}},"Delete")),r.a.createElement(M.a,{type:"vertical"}),r.a.createElement("a",{onClick:function(){var e,n=t.type;e="StreamSql"===n||"FlinkMainClass"===n||"StructuredStreamingSql"===n||"SparkStreamingSql"===n?"/streamingSql/".concat(t.jobId):"/streamingEtl/".concat(t.jobId),a.props.history.push({pathname:e,state:{}})}},"Edit"))}}]},a.openNotificationWithIcon=function(e,t,a){G.a[e]({message:t,description:a,duration:6})},a.render=function(){return r.a.createElement("div",null,r.a.createElement("div",{style:{textAlign:"right",margin:"20px 10px"}},r.a.createElement(N.a,{type:"primary",icon:"reload",onClick:function(){return a.loadjobs()}},"Refresh"),r.a.createElement(N.a,{style:{margin:"0 10px"},type:"primary",icon:"folder-add",onClick:function(){a.props.history.push("/streamingEtl",{data:{}})}},"Create_ETL"),r.a.createElement(N.a,{type:"primary",icon:"folder-add",onClick:function(){return a.setState({visible:!0})}},"Create_StreamSQL"),r.a.createElement(v.a,{title:"Create New StreamSQL",visible:a.state.visible,onOk:function(){a.setState({visible:!1});var e=a.refs.create_new_job_id.state.value;a.props.history.push({pathname:"/streamingSql",state:{jobName:e,create:!0}})},onCancel:function(){a.setState({visible:!1})}},"JobId: ",r.a.createElement(I.a,{placeholder:"please enter job id",ref:"create_new_job_id"}))),r.a.createElement(J.a,{bordered:!0,pagination:!1,dataSource:a.state.jobList,columns:a.state.columns,rowKey:"jobId"}))},a}return Object(y.a)(t,e),Object(d.a)(t,[{key:"fetchData",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/_sys/job_manger".concat(t),{method:"GET"});case 2:return a=e.sent,e.next=5,a.json();case 5:if(!1!==(a=e.sent).success){e.next=9;break}return this.openNotificationWithIcon("error",a.error_code,a.message),e.abrupt("return");case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleDeployOrStop",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData("/".concat(t,"/").concat(a));case 2:return e.next=4,this.loadjobs();case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"loadjobs",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchData("/jobs");case 2:(t=e.sent)&&this.setState({jobList:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){this.loadjobs()}}]),t}(r.a.Component),W=function(e){function t(){return Object(p.a)(this,t),Object(f.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){for(var e=this.props.log,t=/\\x1b\[\d*m/g,a=e.match(t),n=e.split(t),o={"\x1b[30m":"black","\x1b[31m":"red","\x1b[32m":"green","\x1b[33m":"#dab633","\x1b[34m":"blue","\x1b[35m":"magenta","\x1b[36m":"cyan","\x1b[37m":"white","\x1b[39m":"default","\x1b[m":"black"},c=[],l=[],s=0;s<n.length;s++)0!==s?l.push(r.a.createElement("span",{style:{color:o[a[s-1]]}},n[s])):l.push(r.a.createElement("span",{style:{color:"black"}},n[s]));return c.push(r.a.createElement("pre",{style:{marginBottom:"0em",overflow:"visible"}},l)),r.a.createElement("div",null,c)}}]),t}(r.a.Component),R=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={arrLogs:[],last_num:-1,id:null,intervalId:null},a.render=function(){return r.a.createElement("div",{style:{height:"95vh",overflow:"scroll"},ref:"scroll_con"},a.state.arrLogs.map(function(e){return r.a.createElement(W,{log:e.val})}))},a}return Object(y.a)(t,e),Object(d.a)(t,[{key:"showlog",value:function(e){var t=!0;if(""!==e&&null!==e){if(null===e.logs||0===e.logs.length)return;var a=(new Date).getTime();for(var n in e.logs)this.state.arrLogs.length>1e3&&this.state.arrLogs.shift(),this.state.arrLogs.push({key:a+"_"+n,val:e.logs[n]});var r=this.refs.scroll_con;if(r.scrollTop<r.scrollHeight-r.clientHeight-1)return void(t=!1);this.setState({id:e.id,last_num:e.next,arrLogs:this.state.arrLogs}),t&&(r.scrollTop=r.scrollHeight)}}},{key:"fetchData",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t=t+"?rd="+Math.random(),a)t+="&"+n+"="+a[n];return e.next=4,fetch(t,{method:"GET"});case 4:return r=e.sent,e.prev=5,e.next=8,r.json();case 8:r=e.sent,this.showlog(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0);case 15:case"end":return e.stop()}},e,this,[[5,12]])}));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=this,t=setInterval(function(){e.fetchData("/_sys/server/logs",{last_num:e.state.last_num,id:e.state.id})},1e3);this.setState({intervalId:t})}},{key:"componentWillUnmount",value:function(){console.log("Clearing ShowLogs Interval ".concat(this.state.intervalId)),clearInterval(this.state.intervalId)}}]),t}(r.a.Component),F=a(80),z=a(358),Y=a(347),U=a(348),H=a(354),B=a(349),K=a(71),V=a(131),Q=r.a.createContext(),X=w.a.create()(function(e){var t=e.form,a=(e.index,Object(V.a)(e,["form","index"]));return r.a.createElement(Q.Provider,{value:t},r.a.createElement("tr",a))}),Z=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={editing:!1},a.toggleEdit=function(){var e=!a.state.editing;a.setState({editing:e},function(){e&&a.input.focus()})},a.save=function(e){var t=a.props,n=t.record,r=t.handleSave;a.form.validateFields(function(t,o){t&&t[e.currentTarget.id]||(a.toggleEdit(),r(Object(q.a)({},n,o)))})},a.renderCell=function(e){a.form=e;var t=a.props,n=t.children,o=t.dataIndex,c=t.record,l=t.title;return a.state.editing?r.a.createElement(w.a.Item,{style:{margin:0}},e.getFieldDecorator(o,{rules:[{required:!0,message:"".concat(l," is required.")}],initialValue:c[o]})(r.a.createElement(I.a,{ref:function(e){return a.input=e},onPressEnter:a.save,onBlur:a.save}))):r.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:a.toggleEdit},n)},a}return Object(y.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.editable,a=(e.dataIndex,e.title,e.record,e.index,e.handleSave,e.children),n=Object(V.a)(e,["editable","dataIndex","title","record","index","handleSave","children"]);return r.a.createElement("td",n,t?r.a.createElement(Q.Consumer,null,this.renderCell):a)}}]),t}(r.a.Component),$=(r.a.Component,a(173)),ee=(a(333),a(334),a(335),a(336),function(e){function t(e,a){var n;return Object(p.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this))).state={create:!1,jobId:null,jobName:null,engine:"StreamSql",query:"create input table xxx()",config:{},editConfig:{},showErrorMessage:"",visible:!1,saveing:!1},n.columns=[{title:"key",dataIndex:"key"},{title:"value",dataIndex:"value",editable:!0}],n.showDrawer=function(){n.setState({visible:!0})},n.openNotificationWithIcon=function(e,t,a){G.a[e]({message:t,description:a,duration:6})},n.render=function(){var e=F.a.Option,t=function(){n.setState({showErrorMessage:""})},a={body:{row:X,cell:Z}},o=n.columns.map(function(e){return e.editable?Object(q.a)({},e,{onCell:function(t){return{record:t,editable:e.editable,dataIndex:e.dataIndex,title:e.title,handleSave:function(e){n.state.editConfig[e.key]=e.value,n.setState({editConfig:n.state.editConfig})}}}}):e});return r.a.createElement("div",null,function(){if(n.state.showErrorMessage)return r.a.createElement(z.a,{message:"Error",description:r.a.createElement("pre",null,n.state.showErrorMessage),type:"error",showIcon:!0,closable:!0,onClose:t})}(),r.a.createElement(Y.a,{style:{margin:"10px"}},r.a.createElement(U.a,{span:4},r.a.createElement(L.a,{style:{fontSize:"16px",padding:"5px 25px"},color:"blue"},"Job: ",n.state.jobName)),r.a.createElement(U.a,{span:20,style:{textAlign:"right"}},r.a.createElement(F.a,{style:{margin:"0 10px"},defaultValue:"StreamSql",onSelect:function(e){n.setState({engine:e})}},r.a.createElement(e,{value:"StreamSql"},"FlinkStreamSql"),r.a.createElement(e,{value:"SparkStreamingSql"},"SparkStreamingSql"),r.a.createElement(e,{value:"StructuredStreamingSql"},"StructuredStreamingSql")),r.a.createElement(N.a,{type:"primary",icon:"setting",onClick:n.showDrawer},"Setting"),r.a.createElement(N.a,{style:{margin:"0 10px"},type:"primary",icon:"file"},"Files"),r.a.createElement(N.a,{type:"primary",icon:"save",onClick:function(){return n.jobSave()}},"Save",function(){if(n.state.saveing)return r.a.createElement(E.a,{type:"loading"})}()))),r.a.createElement($.UnControlled,{value:n.state.query,style:{"min-height":"100%",height:"auto"},options:{lineNumbers:!0,mode:{name:"text/x-sql"},extraKeys:{Ctrl:"autocomplete"},theme:"neo"},onChange:function(e,t,a){n.state.query=a}}),r.a.createElement("div",null,r.a.createElement(H.a,{title:"Setting job config",width:"50%",onClose:n.onClose,visible:n.state.visible},r.a.createElement("p",null,"basic configuration:"),r.a.createElement(J.a,{components:a,scroll:{y:420},pagination:{pageSize:50},dataSource:function(){var e=n.state.editConfig;return Object.keys(e).map(function(t){return{key:t,value:e[t],description:""}})}(),columns:o}),r.a.createElement("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},r.a.createElement(N.a,{onClick:function(){n.setState({visible:!1,editConfig:n.state.config})},style:{marginRight:8}},"Cancel"),r.a.createElement(N.a,{onClick:function(){n.setState({visible:!1,config:n.state.editConfig})},type:"primary"},"Save")))))},n.state.jobId=e.match.params.jobId,void 0!==e.location.state&&(n.state.jobName=e.location.state.jobName),n.state.create=void 0!==n.state.jobName&&null!==n.state.jobName,n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"fetchGetData",value:function(){var e=Object(m.a)(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"GET"});case 2:return a=e.sent,e.next=5,a.json();case 5:a=e.sent,this.setState({jobName:a.jobName,query:a.queryText,jobType:a.type,config:JSON.parse(a.config),editConfig:JSON.parse(a.config)});case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){void 0===this.state.jobId||this.state.create||this.fetchGetData("/_sys/job_manger/job/".concat(this.state.jobId))}},{key:"jobSave",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({saveing:!0}),e.next=3,fetch("/_sys/job_manger/save",{method:"POST",body:JSON.stringify({id:this.state.jobId,jobName:this.state.jobName,queryText:this.state.query,type:this.state.engine,config:JSON.stringify(this.state.config)}),headers:{"content-type":"application/json"}});case 3:return t=e.sent,e.prev=4,e.next=7,t.json();case 7:if(!1!==(t=e.sent).success){e.next=11;break}return this.setState({showErrorMessage:t.message}),e.abrupt("return");case 11:B.a.success("Save job ".concat(this.state.jobName," success"),5);case 12:return e.prev=12,this.setState({saveing:!1}),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[4,,12,15]])}));return function(){return e.apply(this,arguments)}}()}]),t}(r.a.Component)),te=function(e){function t(e,a){var n;return Object(p.a)(this,t),(n=Object(f.a)(this,Object(h.a)(t).call(this))).state={jobId:null,graph:""},n.render=function(){return r.a.createElement("div",null,"etl job: ",n.state.jobId,r.a.createElement("p",null,"not support"),r.a.createElement("div",{id:"actuators_select"}),r.a.createElement("div",{id:"control-panel"}),r.a.createElement("div",{id:"flow_modal"}),r.a.createElement("div",{id:"flow-panel",style:{height:"95vh",width:"100px"}}))},console.log(e),n.state.jobId=e.location.state.data.jobId,n}return Object(y.a)(t,e),Object(d.a)(t,[{key:"fetchGetData",value:function(){var e=Object(m.a)(u.a.mark(function e(t,a){var n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n in t=t+"?rd="+Math.random(),a)t+="&"+n+"="+a[n];return e.next=4,fetch(t,{method:"GET"});case 4:return r=e.sent,e.next=7,r.json();case 7:r=e.sent,this.setState({graph:r.query,jobType:r.jobType,config:r.config});case 9:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){void 0!==this.state.jobId&&this.fetchGetData("/_sys/etl_builder/get",{jobId:this.state.jobId})}},{key:"onEditChange",value:function(e){this.setState({query:e.target.value})}}]),t}(r.a.Component),ae=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={connectors:[]},a.columns=[{title:"connector",dataIndex:"name",key:"name",render:function(e,t){return r.a.createElement(L.a,{key:e,onClick:function(){}},e)}},{title:"driver",dataIndex:"driver",key:"driver"},{title:"type",dataIndex:"type",key:"type",render:function(e,t){return r.a.createElement(L.a,{color:"blue",key:e},e)}},{title:"realTime",dataIndex:"realTime",key:"realTime"}],a.render=function(){return r.a.createElement("div",null,r.a.createElement(J.a,{dataSource:a.state.connectors,columns:a.columns,expandedRowRender:function(e){return r.a.createElement("p",{style:{margin:0}},JSON.stringify(e.config))}}))},a}return Object(y.a)(t,e),Object(d.a)(t,[{key:"fetchData",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/_sys/plugin/list_connectors",{method:"GET"});case 2:return a=e.sent,e.next=5,a.json();case 5:if(a=e.sent,0!==Object.values(a).length){e.next=8;break}return e.abrupt("return");case 8:this.setState({connectors:(t=[].concat).call.apply(t,Object(K.a)(Object.values(a)))});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){this.fetchData()}}]),t}(r.a.Component),ne=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!1,connector:[]},a.columns=[{title:"name",dataIndex:"name",key:"name",render:function(e,t){return r.a.createElement(L.a,{key:e,onClick:function(){}},e)}},{title:"size",dataIndex:"size",key:"size"},{title:"loadTime",dataIndex:"loadTime",key:"loadTime"},{title:"action",dataIndex:"action",key:"action",render:function(e,t){return r.a.createElement(A.a,{title:"Are you sure Delete this moudle?",onConfirm:Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.next=3,fetch("/_sys/plugin/delete_module/?name=".concat(t.name),{method:"GET"});case 3:a.fetchData();case 4:case"end":return e.stop()}},e)})),okText:"Yes",cancelText:"No",placement:"left"},r.a.createElement("a",{href:"#",style:{color:"red"}},"Delete"))}}],a.render=function(){return r.a.createElement("div",null,r.a.createElement(Y.a,{style:{margin:"10px"}},r.a.createElement(U.a,{style:{textAlign:"right"}},r.a.createElement(N.a,{type:"primary",icon:"setting",onClick:a.reloadConnectors.bind(Object(b.a)(a))},"Reload",function(){if(a.state.loading)return r.a.createElement(E.a,{type:"loading"})}()))),r.a.createElement(J.a,{dataSource:a.state.connector,columns:a.columns,expandedRowRender:function(e){return r.a.createElement("div",null,e.drivers.map(function(e){return r.a.createElement(L.a,{key:e,color:"blue"}," ",e)}))}}))},a}return Object(y.a)(t,e),Object(d.a)(t,[{key:"fetchData",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/_sys/plugin/list_modules",{method:"GET"});case 2:return t=e.sent,e.next=5,t.json();case 5:t=e.sent,this.setState({loading:!1,connector:t});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){this.fetchData()}},{key:"reloadConnectors",value:function(){var e=Object(m.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,fetch("/_sys/plugin/reload",{method:"GET"});case 3:B.a.success("reload success"),this.fetchData();case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),t}(r.a.Component),re=g.a.Content,oe=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(f.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={login:!1,loading:!0,userName:null},a.render=function(){return a.state.loading?r.a.createElement("span",null):!0!==a.state.login?r.a.createElement(T,{afterLogin:function(e){return a.setState({userName:e,login:!0})}}):r.a.createElement(g.a,{style:{minHeight:"100vh"}},r.a.createElement(O,{logout:a.logout.bind(Object(b.a)(a))}),r.a.createElement(g.a,null,r.a.createElement(re,{style:{margin:"16px 16px",background:"white"}},r.a.createElement(s.a,{exact:!0,path:"/",component:P}),r.a.createElement(s.a,{path:"/joblist",component:P}),r.a.createElement(s.a,{path:"/connectors",component:ae}),r.a.createElement(s.a,{path:"/connector_manager",component:ne}),r.a.createElement(s.a,{path:"/serverLogs",component:R}),r.a.createElement(s.a,{path:"/streamingSql/:jobId",component:ee}),r.a.createElement(s.a,{exact:!0,path:"/streamingSql",component:ee}),r.a.createElement(s.a,{path:"/streamingEtl",component:te}),r.a.createElement(s.a,{path:"/abc",component:function(){return r.a.createElement("span",null,"AAAAAA")}}))))},a}return Object(y.a)(t,e),Object(d.a)(t,[{key:"login",value:function(){var e=Object(m.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/_sys/auth/login",{method:"POST",body:JSON.stringify({userName:"",password:""}),headers:{"content-type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:!1===(t=e.sent).success?this.setState({login:!1,loading:!1}):this.setState({userName:t.userName,login:!0,loading:!1});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=this;v.a.confirm({title:"Do you Want to Logout this account?",content:this.state.userName,onOk:function(){var t=Object(m.a)(u.a.mark(function t(){var a;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/_sys/auth/logout",{method:"GET"});case 2:return a=t.sent,t.next=5,a.json();case 5:a=t.sent,e.setState({login:!1});case 7:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),onCancel:function(){console.log("Cancel")}})}},{key:"componentWillMount",value:function(){this.login()}}]),t}(r.a.Component);a(338),a(339);c.a.render(r.a.createElement(l.a,null,r.a.createElement(s.a,{path:"/",component:oe})),document.getElementById("root"))}},[[177,1,2]]]);
//# sourceMappingURL=main.00e0b37a.chunk.js.map